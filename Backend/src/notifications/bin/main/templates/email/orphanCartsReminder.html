<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°Tu carrito te est√° esperando!</title>
</head>
<body style="margin: 0; padding: 0; font-family: Arial, Helvetica, sans-serif; background-color: #f4f4f4;">
    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="background-color: #f4f4f4;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" width="620" cellspacing="0" cellpadding="0" border="0"
                       style="background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">

                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); padding: 36px 40px; text-align: center;">
                            <h1 style="color: #ffffff; margin: 0; font-size: 28px; letter-spacing: 1px;">Arka</h1>
                            <p style="color: #e0e7ff; margin: 8px 0 0 0; font-size: 13px; text-transform: uppercase; letter-spacing: 2px;">Tu carrito te est√° esperando</p>
                        </td>
                    </tr>

                    <!-- Hero Hook -->
                    <tr>
                        <td style="padding: 36px 40px 10px 40px; text-align: center;">
                            <p style="font-size: 42px; margin: 0;">üõí</p>
                            <h2 style="color: #1f2937; font-size: 24px; margin: 12px 0 8px 0; line-height: 1.3;">
                                ¬°Hola, <span th:text="${firstName}">Carlos</span>! <br>Dejaste algo especial atr√°s.
                            </h2>
                            <p style="color: #6b7280; font-size: 15px; margin: 0 0 6px 0; line-height: 1.6;">
                                Sabemos que la vida es ocupada, pero estos productos siguen reservados para ti.
                                <strong style="color: #6366f1;">No dejes que se te escapen.</strong>
                            </p>
                            <p style="color: #9ca3af; font-size: 13px; margin: 10px 0 0 0;">
                                üïê Carrito creado el
                                <strong th:text="${#temporals.format(cartCreatedAt, 'dd MMM yyyy') + ' a las ' + #temporals.format(cartCreatedAt, 'HH:mm')}">28 Feb 2026 a las 14:32</strong>
                            </p>
                        </td>
                    </tr>

                    <!-- Divider -->
                    <tr>
                        <td style="padding: 20px 40px 0 40px;">
                            <hr style="border: none; border-top: 2px solid #e5e7eb; margin: 0;">
                        </td>
                    </tr>

                    <!-- Products Section -->
                    <tr>
                        <td style="padding: 24px 40px 10px 40px;">
                            <h3 style="color: #1f2937; font-size: 15px; margin: 0 0 16px 0; text-transform: uppercase; letter-spacing: 1px;">
                                üì¶ Productos en tu carrito
                            </h3>

                            <!-- Product row ‚Äî th:each sobre products (List<CartProductInfo>) -->
                            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0"
                                   th:each="product, iterStat : ${products}">
                                <tr>
                                    <td th:style="${iterStat.last} ? 'padding: 10px 0;' : 'padding: 10px 0; border-bottom: 1px dashed #e5e7eb;'">
                                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                            <tr>
                                                <!-- Icon -->
                                                <td width="40" style="vertical-align: middle; padding-right: 12px;">
                                                    <div style="width: 36px; height: 36px; background: linear-gradient(135deg, #ede9fe, #ddd6fe); border-radius: 8px; text-align: center; line-height: 36px; font-size: 18px;">üéì</div>
                                                </td>
                                                <!-- Name -->
                                                <td style="vertical-align: middle;">
                                                    <p style="margin: 0; font-size: 14px; font-weight: bold; color: #1f2937;"
                                                       th:text="${product.name}">Curso de Python Pro</p>
                                                </td>
                                                <!-- Price -->
                                                <td style="vertical-align: middle; text-align: right; white-space: nowrap;">
                                                    <span style="font-size: 15px; font-weight: bold; color: #065f46;"
                                                          th:text="${product.price}">59.99</span>
                                                    <span style="font-size: 12px; color: #9ca3af; margin-left: 3px;"
                                                          th:text="${product.currency}">USD</span>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>

                        </td>
                    </tr>

                    <!-- Total -->
                    <!-- <tr>
                        <td style="padding: 0 40px 24px 40px;">
                            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                <tr>
                                    <td style="background-color: #f5f3ff; border-radius: 8px; padding: 14px 20px;">
                                        <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                            <tr>
                                                <td style="font-size: 14px; color: #6b7280; font-weight: bold;">Total estimado</td>
                                                <td style="text-align: right;">
                                                    <span style="font-size: 20px; font-weight: bold; color: #6366f1;"
                                                          th:text="${cartTotal}">119.97</span>
                                                    
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr> -->

                    

                    <!-- Urgency Banner -->
                    <tr>
                        <td style="padding: 0 40px 30px 40px;">
                            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                <tr>
                                    <td style="background-color: #fef3c7; border-radius: 8px; padding: 14px 20px; border-left: 4px solid #f59e0b; text-align: center;">
                                        <p style="margin: 0; font-size: 13px; color: #92400e;">
                                            ‚ö° <strong>¬°No esperes m√°s!</strong> Los precios pueden cambiar en cualquier momento. Asegura los tuyos hoy.
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <!-- Divider -->
                    <tr>
                        <td style="padding: 0 40px;">
                            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 0;">
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background-color: #1f2937; padding: 25px 40px; text-align: center; border-radius: 0 0 8px 8px;">
                            <p style="color: #9ca3af; font-size: 13px; margin: 0 0 6px 0;">
                                ¬øTienes dudas? Escr√≠benos a
                                <a th:href="'mailto:' + ${supportEmail}"
                                   th:text="${supportEmail}"
                                   style="color: #8b5cf6; text-decoration: none;">soporte@arka.com</a>
                            </p>
                            <p style="color: #6b7280; font-size: 12px; margin: 0 0 6px 0;">
                                ¬© <span th:text="${currentYear}">2026</span> Arka. Todos los derechos reservados.
                            </p>
                            <p style="margin: 0;">
                                <a th:href="${unsubscribeUrl}" href="#"
                                   style="color: #4b5563; font-size: 11px; text-decoration: underline;">
                                    Cancelar suscripci√≥n a recordatorios
                                </a>
                            </p>
                        </td>
                    </tr>

                </table>
            </td>
        </tr>
    </table>
</body>
</html>